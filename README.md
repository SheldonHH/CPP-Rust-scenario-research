| 类型                 | 模式                                                                                       | 应对方法                                                                                                                                                                                                                                                                                                                                                                                                                                      |
|----------------------|--------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 简单的enum直接映射    | Rust中的简单enum直接映射到C++，无需额外的数据或复杂的转换。                                  | 1. **在Rust中定义enum**：使用`#[repr(C)]`确保Rust的enum内存布局与C++一致，并定义外部可调用的函数。<br>2. **在C++中定义相应的enum**：确保C++的enum定义与Rust的enum匹配，并声明外部函数。                                                                                                                                                                                                                       |
| 带数据的enum映射      | Rust中的复杂enum包含数据，需要转换成C++能处理的简单enum，并通过标签和数据传递。                | 1. **在Rust中定义带数据的enum**：定义带数据的enum，并提供一个函数将复杂enum转换为简单enum。<br>2. **定义外部可调用的函数**：实现一个C接口函数，接收标签和数据参数，根据标签构造复杂enum并进行转换和处理。<br>3. **在C++中定义相应的enum和数据结构**：定义与Rust复杂enum标签匹配的enum，并声明外部函数。                                                                                                                  |
| 包含trait的enum映射   | Rust中的enum包含trait，需要在C++中调用Rust函数并处理trait相关的逻辑。                          | 1. **在Rust中定义包含trait的enum**：实现一个trait，并为enum提供实现。定义一个函数将复杂enum转换为简单enum，并提供描述函数。<br>2. **定义外部可调用的函数**：实现一个C接口函数，接收标签和数据参数，根据标签构造复杂enum，进行转换和处理，并调用描述函数。<br>3. **在C++中定义相应的enum和数据结构**：定义与Rust复杂enum标签匹配的enum，并声明外部函数。                                                         |



## Sanitanizer 成功一个例子：具体参见
https://github.com/SheldonHH/trophy-cases-ffi
# CPP-Rust-scenario-research
